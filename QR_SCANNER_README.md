# QR Scanner Page - หน้าสแกน QR Code

## ภาพรวม (Overview)
หน้า QR Scanner เป็นฟีเจอร์ใหม่ที่เพิ่มเข้ามาในระบบโรงแรม เพื่อให้พนักงานสามารถสแกน QR Code ได้อย่างสะดวกและรวดเร็ว

## ฟีเจอร์หลัก (Main Features)

### 1. **การเลือกกล้อง (Camera Selection)**
- แสดงรายการกล้องที่ใช้งานได้ทั้งหมด
- เลือกกล้องที่ต้องการใช้
- ปุ่มรีเฟรชเพื่อค้นหากล้องใหม่
- รองรับทั้งกล้องหน้าและกล้องหลัง

### 2. **การสแกน QR Code (QR Code Scanning)**
- เปิดกล้องเพื่อสแกน QR Code
- กรอบสแกนสีน้ำเงินพร้อมตัวบ่งชี้มุม
- เส้นสแกนเคลื่อนไหว (Scanning Line Animation)
- หยุดสแกนได้ตลอดเวลา

### 3. **ผลการสแกน (Scan Results)**
- แสดงประเภทของ QR Code (URL, Text, etc.)
- แสดงข้อมูลที่สแกนได้
- เวลาที่สแกน
- ปุ่มคัดลอกข้อมูล
- ปุ่มเปิดลิงก์ (สำหรับ URL)

### 4. **การจัดการข้อมูล (Data Management)**
- คัดลอกข้อมูลไปยังคลิปบอร์ด
- เปิดลิงก์ในแท็บใหม่
- สแกนใหม่
- รีเซ็ตเครื่องสแกน

## การใช้งาน (Usage)

### ขั้นตอนการสแกน:
1. **เลือกกล้อง**: เลือกกล้องที่ต้องการใช้จากรายการ
2. **เริ่มสแกน**: คลิกปุ่ม "เริ่มสแกน" เพื่อเปิดกล้อง
3. **วาง QR Code**: วาง QR Code ไว้ในกรอบสี่เหลี่ยมสีน้ำเงิน
4. **รอผล**: ระบบจะประมวลผลและแสดงข้อมูลที่สแกนได้

### การจัดการผลลัพธ์:
- **คัดลอก**: คลิกปุ่ม "คัดลอก" เพื่อคัดลอกข้อมูล
- **เปิดลิงก์**: คลิกปุ่ม "เปิดลิงก์" สำหรับ URL
- **สแกนใหม่**: คลิกปุ่ม "สแกนใหม่" เพื่อสแกน QR Code อื่น

## โครงสร้างไฟล์ (File Structure)

```
src/app/scan-qr/
└── page.js          # หน้าหลัก QR Scanner
```

## การเชื่อมต่อ (Integration)

### Sidebar Navigation:
- เพิ่มลิงก์ "สแกน QR" ใน Sidebar
- ตำแหน่ง: หลัง Reports และก่อน Settings
- ไอคอน: Camera icon

### Protected Route:
- ใช้ `ProtectedRoute` component
- ต้องล็อกอินก่อนใช้งาน
- เชื่อมต่อกับระบบ Authentication

## เทคโนโลยีที่ใช้ (Technologies Used)

### Frontend:
- **React Hooks**: useState, useRef, useEffect
- **Next.js**: Navigation, routing
- **Tailwind CSS**: Styling และ responsive design

### Camera API:
- **MediaDevices API**: เข้าถึงกล้อง
- **getUserMedia**: เปิดกล้อง
- **Canvas API**: ประมวลผลภาพ

### QR Code Detection:
- **Simulated Detection**: สำหรับ demo (3 วินาที)
- **Real Implementation**: สามารถใช้ jsQR library ได้

## การตั้งค่า (Configuration)

### Camera Constraints:
```javascript
const constraints = {
  video: {
    deviceId: selectedCamera ? { exact: selectedCamera } : undefined,
    facingMode: 'environment', // กล้องหลัง
    width: { ideal: 1280 },
    height: { ideal: 720 }
  }
};
```

### Environment Variables:
- ไม่ต้องการ environment variables เพิ่มเติม
- ใช้ API_BASE_URL จาก config ที่มีอยู่

## การปรับแต่ง (Customization)

### สีและธีม:
- ใช้ Tailwind CSS classes
- สีหลัก: Blue (#3B82F6)
- สีสำเร็จ: Green (#10B981)
- สีข้อผิดพลาด: Red (#EF4444)

### ภาษา:
- ข้อความภาษาไทย
- สามารถเพิ่ม i18n ได้ในอนาคต

## การทดสอบ (Testing)

### ฟีเจอร์ที่ทดสอบได้:
1. **การเลือกกล้อง**: รายการกล้อง, การเปลี่ยนกล้อง
2. **การเปิดกล้อง**: สิทธิ์การเข้าถึง, การแสดงภาพ
3. **การสแกน**: การประมวลผล QR Code
4. **ผลลัพธ์**: การแสดงข้อมูล, การคัดลอก, การเปิดลิงก์

### การทดสอบบนอุปกรณ์:
- **Desktop**: กล้องเว็บแคม
- **Mobile**: กล้องมือถือ
- **Tablet**: กล้องแท็บเล็ต

## การพัฒนาต่อ (Future Development)

### ฟีเจอร์ที่อาจเพิ่ม:
1. **Real QR Detection**: ใช้ jsQR หรือ ZXing library
2. **History**: บันทึกประวัติการสแกน
3. **Export**: ส่งออกข้อมูลการสแกน
4. **Batch Scanning**: สแกนหลาย QR Code พร้อมกัน
5. **Custom Actions**: กำหนดการทำงานตามประเภท QR Code

### การปรับปรุงประสิทธิภาพ:
1. **Web Workers**: ประมวลผล QR Code ใน background
2. **Image Optimization**: ปรับขนาดภาพก่อนประมวลผล
3. **Caching**: เก็บข้อมูลกล้องและการตั้งค่า

## การแก้ไขปัญหา (Troubleshooting)

### ปัญหาที่พบบ่อย:
1. **กล้องไม่เปิด**: ตรวจสอบสิทธิ์การเข้าถึงกล้อง
2. **QR Code ไม่ถูกอ่าน**: ตรวจสอบแสงและระยะห่าง
3. **การแสดงผลผิด**: ตรวจสอบ browser compatibility

### Browser Support:
- **Chrome**: รองรับเต็มรูปแบบ
- **Firefox**: รองรับเต็มรูปแบบ
- **Safari**: รองรับเต็มรูปแบบ
- **Edge**: รองรับเต็มรูปแบบ

## สรุป (Summary)

หน้า QR Scanner เป็นฟีเจอร์ที่มีประโยชน์สำหรับโรงแรมในการ:
- **เพิ่มความสะดวก**: สแกน QR Code ได้ทันที
- **ลดข้อผิดพลาด**: ลดการพิมพ์ข้อมูลผิด
- **เพิ่มประสิทธิภาพ**: ประมวลผลข้อมูลได้รวดเร็ว
- **รองรับหลายอุปกรณ์**: ใช้งานได้ทั้งมือถือและคอมพิวเตอร์

ฟีเจอร์นี้พร้อมใช้งานและสามารถปรับแต่งเพิ่มเติมได้ตามความต้องการของโรงแรม

